## hannWindow

주파수의 사작과 끝을 0으로 초기화하고 주파수 분석 중에 연결되어 있다고 착각하는 상황을 제거

공식 : w(n)=0.5(1−cos(N−12πn​))
코드 : input.map((x, n) => x \* 0.5 \* (1 - Math.cos((2 \* Math.PI \* n) / (N - 1))));

## createSpectrum

복소수 ( complex ) 를 생성하고 일정 단위로 자른 PCM 데이터를 realTransform으로 주파수 성분 분석, 분석된 주파수 성분은 주파수 크기를 구하는데 필요한 공식에 사용된다.

## createMagnitudes

분석된 주파수 성분을 피타고라스 방정식으로 주파수 크기를 구한 후 리턴

```
Im ↑
|
| • (Re, Im)
|
+--------------→ Re
```

코드 : Math.sqrt(re _ re + im _ im) => 주파수 크기

## createBars

구한 주파수 크기들 ( Bar가 될 기반 ) 을 64개의 바로 압축하고, 각 Bar의 개수를 누적하여 평균을 구해 균등한 크기를 가지도록 수정한다.

## smoothBars

함수 이름대로 부드럽게 만들기 위한 함수, 이전 값과 현재 값 그리고 다음 값들을 가지고 현재 값의 적당한 크기를 가져온다. 여기서 적당한 크기란 현재 위치의 크기를 두배로 키우고 이전 값과 다음 값을 더하고 4로 나누어 Bar가 너무 튀지 않게 제한을 두는 것입니다.

## normalize

음원의 기반은 보통 저음이 강한 모습을 보이며 중음 ~ 고음 부분은 상대적으로 약하기 때문에 상대적으로 큰 값은 변화가 잘 없도록 하고 작은 값들을 원본 값보다 크게 보정하여 정규화한다.

## applyAttackRelease

attack과 release는 왼쪽부터 순서대로 올라가는 속도, 내려가는 속도를 나타낸다. 여기서 함수는 현재 값과 이전 주파수 값을 가져와 값이 전보다 크다면 천천히 오르게 0.7 ( 70% ) 정도 속도로 오르도록 키우고 작다면 0.2 ( 20% ) 정도의 속도로 빠르게 내려가도록 설정합니다.
